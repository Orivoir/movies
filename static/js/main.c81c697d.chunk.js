(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{21:function(e,t,a){},26:function(e,t,a){e.exports=a(47)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),i=(a(31),a(1)),s=a(2),l=a(4),u=a(3),m=a(5),h=(a(32),a(12)),f=a(9),v="1ccc920bf3f9b1d1ab7eb98254b66e04",p=new Headers;p.append("Content-Type","application/json");var b=function(e){return new Promise((function(t,a){fetch("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(v,"&language=fr&external_source=imdb_id"),{method:"GET",headers:p}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))},d=(a(33),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={search:"",errorSubmit:!1,error:!1},a.onChangeSearch=a.onChangeSearch.bind(Object(f.a)(a)),a.onSubmitSearch=a.onSubmitSearch.bind(Object(f.a)(a)),a.onBlurSearch=a.onBlurSearch.bind(Object(f.a)(a)),a.inputSearch=r.a.createRef(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputSearch.current.focus()}},{key:"onBlurSearch",value:function(e){this.setState({errorSubmit:!1,error:!1})}},{key:"onSubmitSearch",value:function(e){var t=this;e.preventDefault();var a=this.state.search;a.trim().length<2?this.setState({errorSubmit:"Taille de texte invalide",error:!0}):(this.inputSearch.current.value="",this.inputSearch.current.focus(),this.inputSearch.current.setAttribute("placeholder",a),this.setState({errorSubmit:!1,error:!1,search:""},(function(){var e;(e=a,new Promise((function(t,a){fetch("https://api.themoviedb.org/3/search/movie?api_key=".concat(v,"&query=").concat(e,"&language=fr"),{method:"GET",headers:p}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return a(e)}))}))).then((function(e){t.props.onFilms(e.results)}))})))}},{key:"onChangeSearch",value:function(e){e.preventDefault();var t=e.target.value.trim()<2;this.setState({search:e.target.value,error:t})}},{key:"render",value:function(){var e=this.state,t=e.errorSubmit,a=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"SearchBar",onSubmit:this.onSubmitSearch},r.a.createElement("input",{ref:this.inputSearch,type:"search",name:"search",id:"search",className:a?"error":"",onChange:this.onChangeSearch,autoComplete:"off",placeholder:t||"cherchez films ...",onBlur:this.onBlurSearch}),r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"ion-icon fas fa-search"}))))}}]),t}(r.a.Component)),E=(a(34),a(21),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.redirect;return r.a.createElement(r.a.Fragment,null,t||null,r.a.createElement("section",{className:"banner banner-favorite",onClick:function(){return e.setState({redirect:r.a.createElement(h.a,{to:"/favorites"})})}},r.a.createElement("div",null,r.a.createElement("i",{className:"ion-icon fas fa-heart"}),r.a.createElement("span",null,"( ",this.count," )")),r.a.createElement("p",null,"Vos films pr\xe9f\xe9r\xe9s !")))}},{key:"count",get:function(){var e=parseInt(localStorage.getItem("count-favorites"));return isNaN(e)?0:e}}]),t}(r.a.Component)),g=(a(40),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state.redirect;return r.a.createElement(r.a.Fragment,null,t||null,r.a.createElement("section",{className:"banner banner-to-see",onClick:function(){return e.setState({redirect:r.a.createElement(h.a,{to:"/see"})})}},r.a.createElement("div",null,r.a.createElement("i",{className:"ion-icon far fa-eye"}),r.a.createElement("span",null,"( ",this.count," )")),r.a.createElement("p",null,"Vos films \xe0 voir !")))}},{key:"count",get:function(){var e=parseInt(localStorage.getItem("count-to-see"));return isNaN(e)?0:e}}]),t}(r.a.Component)),S=(a(41),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={films:[]},a.onFilms=a.onFilms.bind(Object(f.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onFilms",value:function(e){this.setState({films:e})}},{key:"render",value:function(){var e=this.state.films;return r.a.createElement("section",{className:"Home"},r.a.createElement(d,{onFilms:this.onFilms}),r.a.createElement(E,null),r.a.createElement(g,null),e.length?r.a.createElement(h.a,{to:{pathname:"/results",state:{films:e}}}):null)}}]),t}(r.a.Component)),j=(a(42),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onFavorite=a.onFavorite.bind(Object(f.a)(a)),a.onSee=a.onSee.bind(Object(f.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"removeToSee",value:function(e){var t="to-see-".concat(e.id,"-").concat(e.title.slice(0,3));localStorage.getItem(t)&&this.toSeeCount(-1),localStorage.removeItem("".concat(t)),this.forceUpdate()}},{key:"favoris",value:function(e){return!!localStorage.getItem("favorite-".concat(e.id,"-").concat(e.title.slice(0,3)))}},{key:"toSee",value:function(e){return!!localStorage.getItem("to-see-".concat(e.id,"-").concat(e.title.slice(0,3)))}},{key:"favoriteCount",value:function(e){var t=parseInt(localStorage.getItem("count-favorites"));return t=isNaN(t)?0:t,t+=e,localStorage.setItem("count-favorites",t),t}},{key:"toSeeCount",value:function(e){var t=parseInt(localStorage.getItem("count-to-see"));return t=isNaN(t)?0:t,t+=e,localStorage.setItem("count-to-see",t),t}},{key:"onFavorite",value:function(e){var t=e.item,a=(t.statusFavorite?"remove":"set")+"Item";this.favoriteCount(/set/.test(a)?1:-1),localStorage[a]("favorite-".concat(t.id,"-").concat(t.title.slice(0,3)),!t.statusFavorite||void 0),this.forceUpdate()}},{key:"onSee",value:function(e){var t=e.item,a=(t.status2see?"remove":"set")+"Item";this.toSeeCount(/set/.test(a)?1:-1),localStorage[a]("to-see-".concat(t.id,"-").concat(t.title.slice(0,3)),!t.status2see||void 0),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.item;return r.a.createElement("li",{key:(Date.now()/(1.25*Math.random())).toString()},r.a.createElement("section",null,r.a.createElement("figure",null,r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w300".concat(t.poster_path||t.backdrop_path),alt:"poster film"}))),r.a.createElement("section",null,r.a.createElement("h2",null,t.title||t.original_title),r.a.createElement("p",{className:"overview"},t.overview||"r\xe9sum\xe9 indisponible"),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(a){a.preventDefault(),a.item=t,a.item.statusFavorite=e.favoris(t),e.removeToSee(t),e.onFavorite(a)},className:"favorite"},r.a.createElement("ion-icon",{name:"heart".concat(this.favoris(t)?"":"-broken")}),r.a.createElement("i",{class:"ion-icon fas fa-heart".concat(this.favoris(t)?"-broken":"")})),r.a.createElement("button",{onClick:function(a){a.preventDefault(),a.item=t,a.item.status2see=e.toSee(t),e.favoris(t)||e.onSee(a)},className:"to-see"},r.a.createElement("i",{class:"ion-icon far fa-eye".concat(this.toSee(t)?"-slash":"")})))))}}]),t}(r.a.Component)),O=a(16);a(43);var y=function(e){var t=e.content,a=e.target,o=Object(n.useState)(!1),c=Object(O.a)(o,2),i=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,i,r.a.createElement("p",{className:"Empty"},r.a.createElement("strong",null,t),"\xa0sont actuellement vide !",a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"vous pouvez les remplir",r.a.createElement("button",{onClick:function(){return s(r.a.createElement(h.a,{to:a}))}},"ici"))))},k=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.name;return r.a.createElement(r.a.Fragment,null,!t.length&&r.a.createElement(y,{content:"vos films ".concat(a),target:"/"}),r.a.createElement("ul",{className:"ShowList"},t.map((function(e){return r.a.createElement(j,{item:e})}))))}}]),t}(r.a.Component);a(44);var C=function(e){var t=e.target,a=e.state,o=Object(n.useState)(!1),c=Object(O.a)(o,2),i=c[0],s=c[1];return r.a.createElement(r.a.Fragment,null,i||r.a.createElement("a",{href:"/",onClick:function(e){return e.preventDefault()}},r.a.createElement("section",{onClick:function(){return s(r.a.createElement(h.a,{to:{pathname:t,state:a||{}}}))},className:"Back"},r.a.createElement("i",{class:"ion-icon fas fa-hand-point-left"}),r.a.createElement("span",null,"Retour"))))},F=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.location.state?r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{target:"/"}),r.a.createElement(k,{items:this.props.location.state.films})):r.a.createElement(h.a,{to:"/"}))}}]),t}(r.a.Component),N=a(15),w=function(e){var t=e instanceof RegExp?e:new RegExp(e.toString());return Object.keys(localStorage).filter((function(e){return t.test(e)}))},I=(a(45),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={movies:[],idMovies:[]};var n=w(/^favorite-/);return a.state.idMovies=n.map((function(e){var t=e.split("-");return t.shift(),t[0]})),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.favorite()}},{key:"favorite",value:function(){var e=this,t=this.state.idMovies;t.length&&b(t[0]).then((function(a){t.shift(),e.setState((function(e){return{movies:[].concat(Object(N.a)(e.movies),[a]),idMovies:t}}),(function(){return e.favorite()}))}))}},{key:"render",value:function(){var e=this.state.movies;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{target:"/"}),r.a.createElement(k,{items:e,name:"favoris"}))}}]),t}(r.a.Component)),M=(a(46),[{id:0,exact:!0,path:"/",name:"home",component:S},{id:1,exact:!1,path:"/results",name:"results",component:F},{id:2,exact:!1,path:"/favorites",name:"favorites",component:I},{id:3,exact:!1,path:"/see",name:"see",component:function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={movies:[],idMovies:[]};var n=w(/^to-see-/);return a.state.idMovies=n.map((function(e){var t=e.split("-");return t.shift(),t.shift(),t[0]})),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.toSee()}},{key:"toSee",value:function(){var e=this,t=this.state.idMovies;t.length&&b(t[0]).then((function(a){t.shift(),e.setState((function(e){return{movies:[].concat(Object(N.a)(e.movies),[a]),idMovies:t}}),(function(){return e.toSee()}))}))}},{key:"render",value:function(){var e=this.state.movies;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{target:"/"}),r.a.createElement(k,{items:e,name:"\xe0 voir"}))}}]),t}(r.a.Component)}]),x=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.d,null,M.map((function(e){return r.a.createElement(h.b,{key:e.id,component:e.component,path:e.path,exact:e.exact})}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(11);c.a.render(r.a.createElement(B.a,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.c81c697d.chunk.js.map